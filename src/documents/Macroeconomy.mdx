import * as React from 'react'

import LineChart from '../components/LineChart';
import MultiLineChart from '../components/MultiLineChart';
import BarChart from '../components/BarChart';
import macroData from '../../server/macro-data.js';


# ğŸŒ å®è§‚ç»æµåˆ†æï¼ˆç¤ºä¾‹ï¼‰

export const buildMultiLineData = (groups) => {
  if (!groups || groups.length === 0) return { labels: [], datasets: [] };

  const timeSet = new Set();
  groups.forEach(g => (g.points || []).forEach(p => timeSet.add(p.time)));
  const labels = Array.from(timeSet).sort();

  const palette = [
    '#3b82f6', // blue
    '#ef4444', // red
    '#10b981', // green
    '#f59e0b', // amber
    '#8b5cf6', // purple
    '#06b6d4', // cyan
    '#f43f5e', // rose
    '#84cc16', // lime
  ];

  const datasets = groups.map((g, i) => {
    const valueByTime = new Map((g.points || []).map(p => [p.time, p.value]));
    return {
      label: g.name || g.key || `ç³»åˆ—${i + 1}`,
      data: labels.map(t => (valueByTime.has(t) ? valueByTime.get(t) : null)),
      borderColor: palette[i % palette.length],
      backgroundColor: 'rgba(0,0,0,0)',
      tension: 0.3,
      spanGaps: true,
    };
  });

  return { labels, datasets };
};

## PPI å·¥ä¸šç”Ÿäº§è€…å‡ºå‚ä»·æ ¼æŒ‡æ•°

- æ•°æ®æ¥æºï¼š`server/macro-data.js` è‡ªåŠ¨ç”Ÿæˆæ•°æ®
- å±•ç¤ºï¼šå¤šæŠ˜çº¿å›¾ + æ˜ç»†è¡¨æ ¼

<MultiLineChart data={buildMultiLineData(macroData.PPI)} yMin={90} yMax={120} title={'PPI å¤šæŠ˜çº¿å›¾'} />

---

## CPI å±…æ°‘æ¶ˆè´¹ä»·æ ¼æŒ‡æ•°

- æ•°æ®æ¥æºï¼š`server/macro-data.js` è‡ªåŠ¨ç”Ÿæˆæ•°æ®
- å±•ç¤ºï¼šå¤šæŠ˜çº¿å›¾ + æ˜ç»†è¡¨æ ¼

<MultiLineChart data={buildMultiLineData(macroData.CPI)} yMin={90} yMax={120} title={'CPI å¤šæŠ˜çº¿å›¾'} />
