import * as React from 'react'

import LineChart from '../components/LineChart';
import MultiLineChart from '../components/MultiLineChart';
import BarChart from '../components/BarChart';
import macroData from '../../server/macro-data.js';


# 🌐 宏观经济分析（示例）

export const buildMultiLineData = (groups) => {
  if (!groups || groups.length === 0) return { labels: [], datasets: [] };

  const timeSet = new Set();
  groups.forEach(g => (g.points || []).forEach(p => timeSet.add(p.time)));
  const labels = Array.from(timeSet).sort();

  const palette = [
    '#3b82f6', // blue
    '#ef4444', // red
    '#10b981', // green
    '#f59e0b', // amber
    '#8b5cf6', // purple
    '#06b6d4', // cyan
    '#f43f5e', // rose
    '#84cc16', // lime
  ];

  const datasets = groups.map((g, i) => {
    const valueByTime = new Map((g.points || []).map(p => [p.time, p.value]));
    return {
      label: g.name || g.key || `系列${i + 1}`,
      data: labels.map(t => (valueByTime.has(t) ? valueByTime.get(t) : null)),
      borderColor: palette[i % palette.length],
      backgroundColor: 'rgba(0,0,0,0)',
      tension: 0.3,
      spanGaps: true,
    };
  });

  return { labels, datasets };
};

## PPI 工业生产者出厂价格指数

- 数据来源：`server/macro-data.js` 自动生成数据
- 展示：多折线图 + 明细表格

<MultiLineChart data={buildMultiLineData(macroData.PPI)} yMin={90} yMax={120} title={'PPI 多折线图'} />

---

## CPI 居民消费价格指数

- 数据来源：`server/macro-data.js` 自动生成数据
- 展示：多折线图 + 明细表格

<MultiLineChart data={buildMultiLineData(macroData.CPI)} yMin={90} yMax={120} title={'CPI 多折线图'} />
